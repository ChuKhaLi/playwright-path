<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Registration Form - HTML Forms Example</title>
    <style>
        /* Modern form styling for clear visual hierarchy */
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .form-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #fafafa;
        }
        
        .section-title {
            margin: 0 0 20px 0;
            color: #34495e;
            font-size: 1.2em;
            font-weight: 600;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .required {
            color: #e74c3c;
            font-weight: bold;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="tel"],
        input[type="number"],
        input[type="date"],
        input[type="file"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        input:valid {
            border-color: #27ae60;
        }
        
        input:invalid {
            border-color: #e74c3c;
        }
        
        .help-text {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
            padding: 8px;
            background-color: #fdf2f2;
            border: 1px solid #fecaca;
            border-radius: 4px;
        }
        
        .success-message {
            color: #27ae60;
            font-size: 14px;
            margin-top: 5px;
            display: none;
            padding: 8px;
            background-color: #f0f9f4;
            border: 1px solid #a7f3d0;
            border-radius: 4px;
        }
        
        /* Radio and Checkbox styling */
        .radio-group,
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .radio-option,
        .checkbox-option {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .radio-option input,
        .checkbox-option input {
            width: auto;
            margin-top: 2px;
        }
        
        .radio-option label,
        .checkbox-option label {
            margin-bottom: 0;
            cursor: pointer;
        }
        
        .option-description {
            display: block;
            font-size: 14px;
            color: #7f8c8d;
            font-weight: normal;
            margin-top: 2px;
        }
        
        /* Button styling */
        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .primary-button {
            background-color: #3498db;
            color: white;
        }
        
        .primary-button:hover {
            background-color: #2980b9;
        }
        
        .primary-button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .secondary-button {
            background-color: #95a5a6;
            color: white;
        }
        
        .secondary-button:hover {
            background-color: #7f8c8d;
        }
        
        /* Status messages */
        .form-messages {
            margin-top: 20px;
        }
        
        .loading-message {
            color: #3498db;
            font-size: 16px;
            text-align: center;
            padding: 15px;
            background-color: #ebf3fd;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            display: none;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .form-actions {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Create Your Account</h1>
        
        <form action="/api/users/register" method="post" 
              data-testid="registration-form" id="registrationForm">
            
            <!-- Personal Information Section -->
            <div class="form-section">
                <h2 class="section-title">Personal Information</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">
                            First Name <span class="required">*</span>
                        </label>
                        <input type="text" id="firstName" name="firstName" 
                               required maxlength="50" minlength="2"
                               pattern="[A-Za-z\s]+"
                               data-testid="first-name-input"
                               aria-describedby="firstName-help firstName-error"
                               autocomplete="given-name">
                        <div id="firstName-help" class="help-text">
                            2-50 characters, letters and spaces only
                        </div>
                        <div id="firstName-error" class="error-message" 
                             data-testid="first-name-error">
                            First name must be 2-50 characters and contain only letters and spaces
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">
                            Last Name <span class="required">*</span>
                        </label>
                        <input type="text" id="lastName" name="lastName" 
                               required maxlength="50" minlength="2"
                               pattern="[A-Za-z\s]+"
                               data-testid="last-name-input"
                               aria-describedby="lastName-help lastName-error"
                               autocomplete="family-name">
                        <div id="lastName-help" class="help-text">
                            2-50 characters, letters and spaces only
                        </div>
                        <div id="lastName-error" class="error-message" 
                             data-testid="last-name-error">
                            Last name must be 2-50 characters and contain only letters and spaces
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email">
                        Email Address <span class="required">*</span>
                    </label>
                    <input type="email" id="email" name="email" 
                           required 
                           pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                           data-testid="email-input"
                           aria-describedby="email-help email-error"
                           autocomplete="email">
                    <div id="email-help" class="help-text">
                        We'll use this for account verification and important updates
                    </div>
                    <div id="email-error" class="error-message" 
                         data-testid="email-error">
                        Please enter a valid email address
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone" 
                               pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                               placeholder="123-456-7890"
                               data-testid="phone-input"
                               aria-describedby="phone-help"
                               autocomplete="tel">
                        <div id="phone-help" class="help-text">
                            Format: 123-456-7890 (optional)
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthDate">Date of Birth</label>
                        <input type="date" id="birthDate" name="birthDate" 
                               min="1900-01-01" max="2010-12-31"
                               data-testid="birth-date-input"
                               aria-describedby="birthDate-help"
                               autocomplete="bday">
                        <div id="birthDate-help" class="help-text">
                            Must be at least 13 years old
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Account Information Section -->
            <div class="form-section">
                <h2 class="section-title">Account Information</h2>
                
                <div class="form-group">
                    <label for="username">
                        Username <span class="required">*</span>
                    </label>
                    <input type="text" id="username" name="username" 
                           required minlength="3" maxlength="20"
                           pattern="[a-zA-Z0-9_]+"
                           data-testid="username-input"
                           aria-describedby="username-help username-error"
                           autocomplete="username">
                    <div id="username-help" class="help-text">
                        3-20 characters, letters, numbers, and underscores only
                    </div>
                    <div id="username-error" class="error-message" 
                         data-testid="username-error">
                        Username must be 3-20 characters, letters, numbers, and underscores only
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="password">
                            Password <span class="required">*</span>
                        </label>
                        <input type="password" id="password" name="password" 
                               required minlength="8" maxlength="128"
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$"
                               data-testid="password-input"
                               aria-describedby="password-help password-error"
                               autocomplete="new-password">
                        <div id="password-help" class="help-text">
                            At least 8 characters with uppercase, lowercase, number, and special character
                        </div>
                        <div id="password-error" class="error-message" 
                             data-testid="password-error">
                            Password must meet the security requirements above
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">
                            Confirm Password <span class="required">*</span>
                        </label>
                        <input type="password" id="confirmPassword" name="confirmPassword" 
                               required 
                               data-testid="confirm-password-input"
                               aria-describedby="confirmPassword-error"
                               autocomplete="new-password">
                        <div id="confirmPassword-error" class="error-message" 
                             data-testid="confirm-password-error">
                            Passwords do not match
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Preferences Section -->
            <div class="form-section">
                <h2 class="section-title">Preferences</h2>
                
                <div class="form-group">
                    <label for="country">Country</label>
                    <select id="country" name="country" data-testid="country-select"
                            autocomplete="country">
                        <option value="">Select a country</option>
                        <optgroup label="North America">
                            <option value="us">United States</option>
                            <option value="ca">Canada</option>
                            <option value="mx">Mexico</option>
                        </optgroup>
                        <optgroup label="Europe">
                            <option value="uk">United Kingdom</option>
                            <option value="de">Germany</option>
                            <option value="fr">France</option>
                            <option value="es">Spain</option>
                            <option value="it">Italy</option>
                        </optgroup>
                        <optgroup label="Asia Pacific">
                            <option value="jp">Japan</option>
                            <option value="au">Australia</option>
                            <option value="sg">Singapore</option>
                            <option value="in">India</option>
                        </optgroup>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Account Type <span class="required">*</span></label>
                    <div class="radio-group" data-testid="account-type-group">
                        <div class="radio-option">
                            <input type="radio" id="personal" name="accountType" 
                                   value="personal" required
                                   data-testid="account-type-personal">
                            <label for="personal">
                                <strong>Personal Account</strong>
                                <span class="option-description">For individual use</span>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="business" name="accountType" 
                                   value="business" required
                                   data-testid="account-type-business">
                            <label for="business">
                                <strong>Business Account</strong>
                                <span class="option-description">For companies and organizations</span>
                            </label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="nonprofit" name="accountType" 
                                   value="nonprofit" required
                                   data-testid="account-type-nonprofit">
                            <label for="nonprofit">
                                <strong>Non-Profit Account</strong>
                                <span class="option-description">For registered non-profit organizations</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Communication Preferences</label>
                    <div class="checkbox-group" data-testid="preferences-group">
                        <div class="checkbox-option">
                            <input type="checkbox" id="emailUpdates" name="preferences" 
                                   value="email" checked
                                   data-testid="preference-email">
                            <label for="emailUpdates">
                                <strong>Email Updates</strong>
                                <span class="option-description">Product updates and announcements</span>
                            </label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="smsAlerts" name="preferences" 
                                   value="sms"
                                   data-testid="preference-sms">
                            <label for="smsAlerts">
                                <strong>SMS Alerts</strong>
                                <span class="option-description">Urgent notifications only</span>
                            </label>
                        </div>
                        <div class="checkbox-option">
                            <input type="checkbox" id="newsletter" name="preferences" 
                                   value="newsletter"
                                   data-testid="preference-newsletter">
                            <label for="newsletter">
                                <strong>Monthly Newsletter</strong>
                                <span class="option-description">Tips, tutorials, and featured content</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Terms and Conditions -->
            <div class="form-section">
                <h2 class="section-title">Legal Agreements</h2>
                
                <div class="checkbox-group" data-testid="agreements-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="terms" name="agreements" 
                               value="terms" required
                               data-testid="terms-checkbox"
                               aria-describedby="terms-error">
                        <label for="terms">
                            I agree to the <a href="/terms" target="_blank">Terms of Service</a>
                            <span class="required">*</span>
                        </label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="privacy" name="agreements" 
                               value="privacy" required
                               data-testid="privacy-checkbox"
                               aria-describedby="privacy-error">
                        <label for="privacy">
                            I acknowledge the <a href="/privacy" target="_blank">Privacy Policy</a>
                            <span class="required">*</span>
                        </label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="marketing" name="agreements" 
                               value="marketing"
                               data-testid="marketing-checkbox">
                        <label for="marketing">
                            I consent to marketing communications (optional)
                        </label>
                    </div>
                </div>
                <div id="terms-error" class="error-message" data-testid="agreements-error">
                    You must agree to the Terms of Service and Privacy Policy
                </div>
            </div>
            
            <!-- Form Actions -->
            <div class="form-actions" data-testid="form-actions">
                <button type="submit" data-testid="submit-button" 
                        class="primary-button">
                    Create Account
                </button>
                <button type="reset" data-testid="reset-button" 
                        class="secondary-button">
                    Clear Form
                </button>
            </div>
            
            <!-- Form Status Messages -->
            <div class="form-messages" data-testid="form-messages">
                <div id="form-success" class="success-message" 
                     data-testid="success-message">
                    Account created successfully! Please check your email to verify your account.
                </div>
                <div id="form-error" class="error-message" 
                     data-testid="form-error">
                    There was an error creating your account. Please try again.
                </div>
                <div id="form-loading" class="loading-message" 
                     data-testid="loading-message">
                    Creating your account...
                </div>
            </div>
        </form>
    </div>

    <script>
        // Form validation and submission handling
        document.getElementById('registrationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Run custom validations
            if (!validatePasswordConfirmation()) {
                return;
            }
            
            if (!validateRequiredAgreements()) {
                return;
            }
            
            // Show loading state
            showLoadingState();
            
            // Simulate API call
            setTimeout(() => {
                hideLoadingState();
                showSuccessMessage();
            }, 2000);
        });
        
        // Password confirmation validation
        function validatePasswordConfirmation() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const errorDiv = document.getElementById('confirmPassword-error');
            
            if (password !== confirmPassword) {
                document.getElementById('confirmPassword').setCustomValidity('Passwords do not match');
                errorDiv.style.display = 'block';
                errorDiv.setAttribute('aria-live', 'polite');
                return false;
            } else {
                document.getElementById('confirmPassword').setCustomValidity('');
                errorDiv.style.display = 'none';
                errorDiv.removeAttribute('aria-live');
                return true;
            }
        }
        
        // Validate required legal agreements
        function validateRequiredAgreements() {
            const terms = document.getElementById('terms').checked;
            const privacy = document.getElementById('privacy').checked;
            const errorDiv = document.getElementById('terms-error');
            
            if (!terms || !privacy) {
                errorDiv.style.display = 'block';
                errorDiv.setAttribute('aria-live', 'assertive');
                return false;
            } else {
                errorDiv.style.display = 'none';
                errorDiv.removeAttribute('aria-live');
                return true;
            }
        }
        
        // Real-time validation
        document.getElementById('confirmPassword').addEventListener('input', validatePasswordConfirmation);
        document.getElementById('password').addEventListener('input', validatePasswordConfirmation);
        
        document.getElementById('terms').addEventListener('change', validateRequiredAgreements);
        document.getElementById('privacy').addEventListener('change', validateRequiredAgreements);
        
        // Show loading state
        function showLoadingState() {
            const submitButton = document.querySelector('[data-testid="submit-button"]');
            const loadingDiv = document.querySelector('[data-testid="loading-message"]');
            
            submitButton.disabled = true;
            submitButton.textContent = 'Creating Account...';
            loadingDiv.style.display = 'block';
            
            // Hide other messages
            document.querySelector('[data-testid="success-message"]').style.display = 'none';
            document.querySelector('[data-testid="form-error"]').style.display = 'none';
        }
        
        // Hide loading state
        function hideLoadingState() {
            const submitButton = document.querySelector('[data-testid="submit-button"]');
            const loadingDiv = document.querySelector('[data-testid="loading-message"]');
            
            submitButton.disabled = false;
            submitButton.textContent = 'Create Account';
            loadingDiv.style.display = 'none';
        }
        
        // Show success message
        function showSuccessMessage() {
            const successDiv = document.querySelector('[data-testid="success-message"]');
            successDiv.style.display = 'block';
            successDiv.setAttribute('aria-live', 'polite');
            successDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Form reset handling
        document.querySelector('[data-testid="reset-button"]').addEventListener('click', function() {
            // Hide all error and success messages
            const messages = document.querySelectorAll('.error-message, .success-message');
            messages.forEach(msg => {
                msg.style.display = 'none';
                msg.removeAttribute('aria-live');
            });
            
            // Clear custom validity
            document.getElementById('confirmPassword').setCustomValidity('');
        });
        
        // Input validation feedback
        const inputs = document.querySelectorAll('input[required], select[required]');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.validity.valid) {
                    this.style.borderColor = '#27ae60';
                } else {
                    this.style.borderColor = '#e74c3c';
                }
            });
            
            input.addEventListener('input', function() {
                if (this.validity.valid) {
                    this.style.borderColor = '#27ae60';
                }
            });
        });
    </script>
</body>
</html>